!function(i,o){"use strict";o.gui.main={},o.gui.main.setSelectedTool=function(o){i("#tombioGuiLargeVisualisation").val()!=o&&i("#tombioGuiLargeVisualisation").val(o)},o.gui.main.resizeControlsAndTaxa=function(){if(i("#tombioGuiLargeControls").is(":visible")){var o=i("#tombioGuiLargeControls").width();i("#tombioGuiLargeTaxa").css("margin-left",o+10);var t=i("#tombioGuiLargeControls").height();i("#tombioGuiLargeControlsAndTaxa").css("min-height",t+10)}else i("#tombioGuiLargeTaxa").css("margin-left",0),i("#tombioGuiLargeControlsAndTaxa").css("min-height","0px")},o.gui.main.init=function(){i("#tombiod3vis").html(""),i("#tombiod3vis").css("position","relative"),i("<div>").attr("id","tombioGuiLarge").css("display","none").appendTo("#tombiod3vis"),i("<div>").attr("id","tombioGuiLargeDialog").css("padding","1em").css("display","none").css("position","absolute").css("background-color","white").css("border","5px solid black").css("width","100%").css("z-index","5000").css("z-index","5000").appendTo("#tombioGuiLarge"),i("<button>").text("Close").appendTo(i("#tombioGuiLargeDialog")).on("click",function(){i("#tombioGuiLargeDialog").hide()}),i("<div>").attr("id","tombioGuiLargeDialogTitle").appendTo(i("#tombioGuiLargeDialog")),i("<div>").attr("id","tombioGuiLargeDialogContents").appendTo(i("#tombioGuiLargeDialog")),i("<select>").attr("id","tombioGuiLargeVisualisation").appendTo("#tombioGuiLarge"),i("<div>").addClass("tombioNoSelect").attr("id","tombioGuiLargeControlsAndTaxa").appendTo("#tombioGuiLarge"),i("<div>").attr("id","tombioGuiLargeControls").appendTo("#tombioGuiLargeControlsAndTaxa"),i("<div>").attr("id","tombioGuiLargeTaxa").appendTo("#tombioGuiLargeControlsAndTaxa"),i("<div>").attr("id","currentVisInfo").css("display","none").appendTo("#tombioGuiLarge"),i("<div>").attr("id","kbInfo").css("display","none").appendTo("#tombioGuiLarge"),i("<div>").attr("id","visInfo").css("display","none").appendTo("#tombioGuiLarge"),i("<div>").attr("id","tombioCitation").css("display","none").appendTo("#tombioGuiLarge"),i("<div>").attr("id","mediaFilesCheck").css("display","none").appendTo("#tombioGuiLarge"),i("<div>").attr("id","tvkCheck").css("display","none").appendTo("#tombioGuiLarge"),o.gui.main.divVis="#tombioGuiLargeTaxa",o.gui.main.divInput="#tombioGuiLargeControls",o.f.checkInterface("guiLarge",o.templates.gui.main,o.gui.main)},o.gui.main.createUIControls=function(){i("#tombioGuiLarge").css("display","");var t=[];t.push(i('<option value="reload" class="html" data-class="reload">Reload</option>')),t.push(i('<option value="reloadGuiOnsen" class="html" data-class="reload">Reload with mobile-first interface</option>')),t.push(i('<option value="reloadGuiJQuery" class="html" data-class="reload">Reload with large format interface</option>')),o.v.includedVisualisations.forEach(function(a,e){var n=i('<option class="needsclick">').attr("value",a).attr("data-class","vis").addClass("visualisation").text(o.js.jsFiles[a].toolName);t.push(n)}),t.push(i('<option id="optCurrentVisInfo" value="currentVisInfo" class="html" data-class="info"></option>')),t.push(i('<option value="kbInfo" class="html" data-class="info">About the Knowledge-base</option>')),t.push(i('<option value="visInfo" class="html" data-class="info">About FSC Identikit</option>')),t.push(i('<option value="tombioCitation" class="html" data-class="info">Get citation text</option>')),o.opts.checkKB&&(t.push(i('<option value="mediaFilesCheck" class="html" data-class="wrench">Check media files</option>')),o.d.oCharacters.tvk&&t.push(i('<option value="tvkCheck" class="html" data-class="wrench">Check TVKs</option>'))),t.forEach(function(i){i.attr("value")==o.v.selectedTool&&i.attr("selected","selected")}),i("#tombioGuiLargeVisualisation").append(t),i("#tombioGuiLargeVisualisation").change(function(){o.f.visChanged(i("#tombioGuiLargeVisualisation").val())}),1==o.opts.hideVisDropdown&&i("#tombioGuiLargeVisualisation-button").hide()},o.gui.main.visShow=function(t){var a=o.v.visualisations[t];if("tombioCitation"==t&&i("#tombioCitation").html(o.f.createCitationPage()),"mediaFilesCheck"==t&&i("#mediaFilesCheck").html(o.f.createMediaCheckPage()),"tvkCheck"==t&&i("#tvkCheck").html(o.f.createTvkCheckPage()),"kbInfo"==t&&0==i("#kbInfo").html().length&&o.f.setKbInfo(i("#kbInfo")),"visInfo"==t&&0==i("#visInfo").html().length&&o.f.setVisInfo(i("#visInfo")),"currentVisInfo"==t&&(i("#currentVisInfo").html(""),o.f.setSelectedToolInfo(i("#currentVisInfo"))),console.log("selectedToolName",t),t!=o.v.currentTool&&(o.v.currentTool&&(o.v.visualisations[o.v.currentTool]?o.v.visualisations[o.v.currentTool].hide():i("#"+o.v.currentTool).hide()),o.v.visualisations[t]?o.v.visualisations[t].show():i("#"+t).show()),a?i("#tombioGuiLargeControlsAndTaxa").show():i("#tombioGuiLargeControlsAndTaxa").hide(),o.f.refreshVisualisation(),o.v.currentTool=t,Object.keys(o.v.visualisations).indexOf(t)>-1&&(o.v.lastVis=t,i("#optCurrentVisInfo").text("Using the "+o.v.visualisations[o.v.lastVis].metadata.title)),!o.v.initialised&&o.v.visualisations[t]){for(var e={},n=decodeURI(window.location.search.substring(1)).replace(/\+/g," ").split("&"),s=0;s<n.length;s++){var l=n[s].split("=");e[l[0]]=l[1]}o.v.visualisations[t].urlParams(e),o.v.initialised=!0}},o.gui.main.showFullDetails=function(t){var a=o.f.getTaxonCharacterValues(o.d.oTaxa[t]),e=i("<div>");if(o.f.addTaxonImagesToContainer({taxon:t,container:e,height:300}),o.d.oCharacters.tvk&&o.d.oTaxa[t].tvk){var n=i("<div>").css("position","relative");o.f.addNBNMapToContainer(o.d.oTaxa[t].tvk,n)}var s=i("<div>"),l=o.f.getTaxonHtmlFiles(t);if(0==l.length)s.text("No text information files (HTML) are specified in the knowledge-base for this taxon.");else{if(l.length>1){var r=i("<select id='tombioFileSelect'></select>").appendTo(s);l.forEach(function(o,t){var a=i("<option/>").text(o.Caption).attr("value",t);r.append(a)}),r.change(function(){o.f.addTaxonHtmlToContainer(t,d,i(this).val())})}var d=i("<div>").appendTo(s);o.f.addTaxonHtmlToContainer(t,d,0)}var u=i("<div>");u.append(a),u.append(e),u.append(s),n&&u.append(n),function(o){var t=i("<div style='background-color: white; position: absolute; z-index: 50000; padding: 20px'>");i("body").prepend(t),t.html(null),i("<button>").text("Dismiss").appendTo(t).click(function(){t.hide()}),t.append(o),t.show()}(u)},o.gui.main.createCharacterTooltips=function(i){},o.gui.main.createTaxonToolTips=function(i,o){},o.gui.main.tooltip=function(i){},o.gui.main.dialog=function(o,t){i("#tombioGuiLargeDialogTitle").text(o),i("#tombioGuiLargeDialogContents").html(t),i("#tombioGuiLargeDialog").show()},o.gui.main.contextMenu={},o.gui.main.contextMenu.addItem=function(){},o.gui.main.contextMenu.removeItem=function(){}}(jQuery,this.tombiovis);